pekko {
    loglevel = "INFO"
    stdout-loglevel = "INFO"
    loggers = ["org.apache.pekko.event.slf4j.Slf4jLogger"]
    logging-filter = "org.apache.pekko.event.slf4j.Slf4jLoggingFilter"
    actor {
        provider = cluster
        debug {
            receive = on
            lifecycle = on
        }
        allow-java-serialization = off
        serializers {
            proto = "org.apache.pekko.remote.serialization.ProtobufSerializer"
            envelope = "org.interscity.htc.core.serializer.EntityEnvelopeSerializer"
            actor-interaction = "org.interscity.htc.core.serializer.ActorInteractionSerializer"
            jackson-json = "org.apache.pekko.serialization.jackson.JacksonJsonSerializer"
            jackson-cbor = "org.apache.pekko.serialization.jackson.JacksonCborSerializer"
        }
        serialization-bindings {
            "org.interscity.htc.core.entity.event.EntityEnvelopeEvent" = envelope
            "scalapb.GeneratedMessage" = proto
            "org.interscity.htc.core.entity.event.ActorInteractionEvent" = actor-interaction
            "org.interscity.htc.core.entity.event.control.execution.TimeManagerRegisterEvent" = jackson-cbor
            "org.interscity.htc.core.entity.event.control.load.CreateActorsEvent" = jackson-cbor
            "org.interscity.htc.core.entity.event.control.load.FinishCreationEvent" = jackson-cbor
            "org.interscity.htc.core.entity.event.control.load.FinishLoadDataEvent" = jackson-cbor
            "org.interscity.htc.core.entity.event.control.load.LoadDataCreatorRegisterEvent" = jackson-cbor
            "org.interscity.htc.core.entity.event.control.load.InitializeEvent" = jackson-cbor
            "org.interscity.htc.core.entity.event.control.load.LoadDataEvent" = jackson-cbor
            "org.interscity.htc.core.entity.event.data.BaseEventData" = jackson-cbor
            "org.interscity.htc.core.entity.event.control.load.LoadDataSourceEvent" = jackson-cbor
            "org.interscity.htc.core.entity.event.SpontaneousEvent" = jackson-cbor
            "org.interscity.htc.core.entity.event.FinishEvent" = jackson-cbor
            "org.interscity.htc.core.actor.ActorSerializable" = jackson-cbor
        }
    }

    persistence {
      journal {
        plugin = "pekko.persistence.journal.inmem"
        inmem {
            class = "org.apache.pekko.persistence.journal.inmem.InmemJournal"
        }
      }
      snapshot-store {
        plugin = "pekko.persistence.snapshot-store.local"
        local {
          class = "org.apache.pekko.persistence.snapshot.local.LocalSnapshotStore"
          dir = "/app/hyperbolic-time-chamber/snapshots"
        }
      }
    }

    remote {
        artery {
            canonical {
                hostname = ${clustering.ip}
                port = ${clustering.port}
            }
        }
    }

    cluster {
        downing-provider-class = "org.apache.pekko.cluster.sbr.SplitBrainResolverProvider"
        seed-nodes = [
            "pekko://"${clustering.cluster.name}"@"${clustering.seed-ip}":"${clustering.seed-port}
        ]
        sharding {
            passivation {
                strategy = default-strategy
                default-strategy {
                    idle-entity.timeout = 5.minutes
                }
            }
;             rebalance-interval = 300 seconds
            verbose-debug-logging = on
            waiting-for-state-timeout = 1 minute
        }
    }

    cluster.bootstrap {
        contact-point-discovery {
            service-name  = "pekko-node"
            port-name     = "management"
            protocol      = "http"
        }
    }

    management {
        http {
            hostname = "0.0.0.0"
            port = 8558
        }
    }

    discovery {
        method = config
    }
}

clustering {
    ip = "127.0.0.1"
    ip = ${?CLUSTER_IP}
    port = 1600
    port = ${?CLUSTER_PORT}
    seed-ip = "127.0.0.1"
    seed-ip = ${?CLUSTER_IP}
    seed-ip = ${?SEED_PORT_1600_TCP_ADDR}
    seed-port = 1600
    seed-port = ${?SEED_PORT_1600_TCP_PORT}
    cluster.name = hyperbolic-time-chamber
}

report-manager {
    enabled-strategies = ["csv", "json", "mongodb", "cassandra", "hbase", "hadoop"]

    hbase {
        zookeeper-quorum = "localhost:2181"
        table-name = "simulation_reports"
    }

    hadoop {
        namenode-uri = "hdfs://localhost:9000"
        directory = "/user/simulation_reports"
    }

    csv {
        directory = "/tmp/reports/csv"
    }

    json {
        directory = "/tmp/reports/json"
    }

    mongodb {
        uri = "mongodb://localhost:27017"
        database = "simulation_reports"
    }

    cassandra {
        contact-points = ["localhost:9042"]
        keyspace = "simulation_reports"
    }
}

databases {
    cassandra {
        default {
            contact-points = ["127.0.0.1:9042"]
            keyspace = "keyspace1"
            local-datacenter = "datacenter1"
            credentials {
                username = "your-username"
                password = "your-password"
            }
        }
    }
}

brokers {
    kafka {
        bootstrap-servers = "localhost:9092"

        consumer {
            group-id-suffix = "htc-group"
            auto-offset-reset = "earliest"
        }
    }
}